<o-form #oForm service="partes" entity="parte"
  columns="IDPARTE;DESCRIPTION;STARTDATE,ENDDATE;STATUS;COMMENTS;OBSERVATIONS" keys="IDPARTE" header-actions="U;D"
  show-header-actions-text="no" layout-align="center" show-header-navigation="no"
  (onDataLoaded)="onFormDataLoaded($event)">
  <o-text-input class="text" attr="IDPARTE" sql-type="INTEGER" enabled="no" fxFlex></o-text-input>
  <o-row>
    <o-column>
      <o-row>
        <o-integer-input #STATUS type="hidden" [hidden]="true" attr="STATUS"></o-integer-input>
      </o-row>
      <o-row>
        <o-text-input #DESCRIPTION class="text" attr="DESCRIPTION" fxFlex="85" enabled="yes" required="yes">
        </o-text-input>
      </o-row>
      <o-row layout-gap="14px" layout-padding-vertical>
        <o-date-input class="text" #STARTDATE (onChange)="dateChange($event)" attr="STARTDATE" required="yes"
          fxFlex="85" enabled="yes"></o-date-input>
      </o-row>
      <o-row>
        <o-date-input class="text" #ENDDATE (onChange)="dateChange($event)" attr="ENDDATE" enabled="yes" required="yes"
          fxFlex="85">
        </o-date-input>
      </o-row>
      <o-row>
        <o-textarea-input #COMMENTS class="text" attr="COMMENTS" rows="3" enabled="yes" fxFlex="85">
        </o-textarea-input>
      </o-row>
      <o-row>
        <o-text-input #OBSERVATIONS  [style.display]="isVisible?'block':'none'" class="text" attr="OBSERVATIONS" enabled="no" >
        </o-text-input>
      </o-row>

      <div
        *ngIf="((oForm.getDataValue('STATUS').value )=== 0 )||((oForm.getDataValue('STATUS').value )=== 3) ;else elseBlock">
        <mat-tab-group>
          <mat-tab [label]="'SPENDINGS' | oTranslate">
            <div fxFlex>
              <o-list #list attr="spendinglist" service="gastos" entity="vgasto" keys="ID" parent-keys="IDPARTE"
                columns="ID;CONCEPT;STARTDATE;PRICE" visible-columns="CONCEPT;STARTDATE;PRICE" refresh-button="true"
                insert-button="true" quick-filter="false" insert-button-position="bottom"
                insert-button-floatable="false" delete-button="true" selectable="true" dense="false"
                detail-button-in-row="true" detail-button-in-row-icon="chevron_right">
                <o-list-item *ngFor="let row of list.dataArray">
                  <o-list-item-text #item title="{{ row.CONCEPT }}" primary-text="{{ row.STARTDATE | date}}">
                  </o-list-item-text>
                </o-list-item>
              </o-list>
            </div>
          </mat-tab>
        </mat-tab-group>
      </div>
      <ng-template #elseBlock>
        <mat-tab-group>
          <mat-tab [label]="'SPENDINGS' | oTranslate">
            <div fxFlex>
              <o-list #list attr="spendinglist" service="gastos" entity="vgasto" keys="ID" parent-keys="IDPARTE"
                columns="ID;CONCEPT;STARTDATE;PRICE" visible-columns="CONCEPT;STARTDATE;PRICE" refresh-button="true"
                insert-button="false" quick-filter="false" insert-button-position="bottom"
                insert-button-floatable="false" delete-button="false" selectable="false" dense="false"
                detail-button-in-row="true" detail-button-in-row-icon="chevron_right">
                <o-list-item *ngFor="let row of list.dataArray">
                  <o-list-item-text #item title="{{ row.CONCEPT }}" primary-text="{{ row.STARTDATE | date}}">
                  </o-list-item-text>
                </o-list-item>
              </o-list>
            </div>
          </mat-tab>
        </mat-tab-group>
      </ng-template>
      <o-row>
        <div *ngIf="((oForm.getDataValue('STATUS').value )=== 0 )||((oForm.getDataValue('STATUS').value )=== 3)">
          <o-row>
            <o-button class="button" attr="stroked" type="STROKED" icon="send" icon-position="left" label="ENVIAR PARTE"
              (click)="onClick($event)">
            </o-button>
          </o-row>
        </div>
      </o-row>
    </o-column>
  </o-row>
</o-form>